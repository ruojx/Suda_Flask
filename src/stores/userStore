// src/stores/userStore.js
import { defineStore } from 'pinia'

export const useUserStore = defineStore('user', {
  state: () => ({
    user: JSON.parse(localStorage.getItem('loginUser')) || null, // 从 localStorage 获取用户信息
  }),
  actions: {
    setUser(user) {
      this.user = user
      localStorage.setItem('loginUser', JSON.stringify(user)) // 保存用户信息到本地存储
    },
    clearUser() {
      this.user = null
      localStorage.removeItem('loginUser') // 清除本地存储中的用户信息
    }
  },
  getters: {
    userId: (state) => state.user?.id, // 获取当前用户ID
    isLoggedIn: (state) => !!state.user, // 判断用户是否登录
  }
})
